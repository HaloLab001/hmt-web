(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70f7c618"],{"0d69":function(e,r,t){"use strict";t("789c")},1270:function(e,r,t){"use strict";t.d(r,"c",(function(){return o})),t.d(r,"i",(function(){return s})),t.d(r,"d",(function(){return n})),t.d(r,"f",(function(){return l})),t.d(r,"h",(function(){return i})),t.d(r,"e",(function(){return c})),t.d(r,"g",(function(){return d})),t.d(r,"b",(function(){return u})),t.d(r,"a",(function(){return m}));var a=t("b775");function o(e){return Object(a["a"])({url:"/api/syncData/createJson",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/api/syncData/save",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/api/syncData/getConnectorsStatus?name="+e,method:"get"})}function l(e){return Object(a["a"])({url:"/api/syncData/pageList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/api/syncData/remove?id="+e,method:"post"})}function c(e){return Object(a["a"])({url:"/api/syncData/getInfoById?id="+e,method:"post"})}function d(e){return Object(a["a"])({url:"/api/syncData/getStatusApiAddress?name="+e,method:"get"})}function u(e){return Object(a["a"])({url:"/api/syncData/batchSave",method:"post",data:e})}function m(e,r){return Object(a["a"])({url:"/api/syncData/batchDeleteTask?taskName="+e+"&projectIds="+r,method:"post"})}},"214b":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"app-container"},[t("el-divider",{attrs:{"content-position":"left"}},[t("h3",[e._v("任务信息")])]),e._v(" "),t("div",{staticStyle:{margin:"50px 0"}}),e._v(" "),t("el-form",{ref:"taskForm",attrs:{rules:e.rules,model:e.readerForm,"label-position":"right","label-width":"120px"}},[t("span",{staticClass:"colExplain",staticStyle:{"font-size":"13px"}},[e._v("不输入任务名称将会默认生成")]),e._v(" "),t("el-form-item",{attrs:{label:"任务名称：",prop:"taskName"}},[t("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"任务名称"},model:{value:e.readerForm.taskName,callback:function(r){e.$set(e.readerForm,"taskName",r)},expression:"readerForm.taskName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属项目：",prop:"projectId"}},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"350px"},attrs:{placeholder:"所属项目"},model:{value:e.readerForm.projectId,callback:function(r){e.$set(e.readerForm,"projectId",r)},expression:"readerForm.projectId"}},e._l(e.jobProjectList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:50}},[t("el-col",{attrs:{span:12}},[t("div",{staticStyle:{margin:"50px 0"}}),e._v(" "),t("el-form",{ref:"readerForm",attrs:{rules:e.rules,model:e.readerForm,"label-position":"right","label-width":"120px"}},[t("el-divider",{attrs:{"content-position":"left"}},[t("h3",[e._v("数据库源端")])]),e._v(" "),t("div",{staticStyle:{margin:"50px 0"}}),e._v(" "),t("el-form-item",{staticClass:"redItem",attrs:{label:"数据库源端：",prop:"datasourceId"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{filterable:""},on:{change:e.rDsChange},model:{value:e.readerForm.datasourceId,callback:function(r){e.$set(e.readerForm,"datasourceId",r)},expression:"readerForm.datasourceId"}},e._l(e.rDsList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.datasourceName,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.needSchema,expression:"needSchema"}],attrs:{label:"Schema：",prop:"tableSchema"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{"allow-create":"","default-first-option":"",filterable:""},on:{change:e.schemaChange},model:{value:e.readerForm.tableSchema,callback:function(r){e.$set(e.readerForm,"tableSchema",r)},expression:"readerForm.tableSchema"}},e._l(e.schemaList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"数据库表名：",prop:"tableName"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{"allow-create":"","default-first-option":"",filterable:""},on:{change:e.rTbChange},model:{value:e.readerForm.tableName,callback:function(r){e.$set(e.readerForm,"tableName",r)},expression:"readerForm.tableName"}},e._l(e.rTbList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),t("el-collapse",{attrs:{accordion:""}},[t("el-collapse-item",[t("template",{slot:"title"},[t("span",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e._v("点击展开/折叠数据源特有配置参数")])]),e._v(" "),e.reMysqlModule?[t("span",{staticClass:"colExplain"},[e._v("需要和目标端的数据库名称一致")]),e._v(" "),t("el-form-item",{attrs:{label:"server.name：",prop:"reServerName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerName,callback:function(r){e.$set(e.readerForm,"reServerName",r)},expression:"readerForm.reServerName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("可通过配置文件my.cnf中查看server-id")]),e._v(" "),t("el-form-item",{attrs:{label:"server.id：",prop:"reServerId"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerId,callback:function(r){e.$set(e.readerForm,"reServerId",r)},expression:"readerForm.reServerId"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("表中没有主键时，需要指定字段作为更改条件")]),e._v(" "),t("el-form-item",{attrs:{label:"主键：",prop:"reKeyColumn"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择主键"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reKeyColumns,callback:function(r){e.$set(e.readerForm,"reKeyColumns",r)},expression:"readerForm.reKeyColumns"}},e._l(e.rColumnList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e._v(" "),e.reOracleModule?[t("span",{staticClass:"colExplain"},[e._v("选择Oracle对应的版本")]),e._v(" "),t("el-form-item",{attrs:{label:"Oracle版本："}},[t("el-select",{staticClass:"filter-item",staticStyle:{width:"350px"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.oracleVersion,callback:function(r){e.$set(e.readerForm,"oracleVersion",r)},expression:"readerForm.oracleVersion"}},e._l(e.oracleVersions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("需要和目标端的数据库名称一致")]),e._v(" "),t("el-form-item",{attrs:{label:"server.name：",prop:"reServerName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerName,callback:function(r){e.$set(e.readerForm,"reServerName",r)},expression:"readerForm.reServerName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("19C要连接的PDB数据库名称(CDB不需要填写)")]),e._v(" "),t("el-form-item",{attrs:{label:"PDB：",prop:"rePdbName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.rePdbName,callback:function(r){e.$set(e.readerForm,"rePdbName",r)},expression:"readerForm.rePdbName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("表中没有主键时，需要指定字段作为更改条件")]),e._v(" "),t("el-form-item",{attrs:{label:"主键：",prop:"reKeyColumn"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择主键"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reKeyColumns,callback:function(r){e.$set(e.readerForm,"reKeyColumns",r)},expression:"readerForm.reKeyColumns"}},e._l(e.rColumnList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e._v(" "),e.rePostgreSqlModule?[t("span",{staticClass:"colExplain"},[e._v("需要和目标端的数据库名称一致")]),e._v(" "),t("el-form-item",{attrs:{label:"server.name：",prop:"reServerName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerName,callback:function(r){e.$set(e.readerForm,"reServerName",r)},expression:"readerForm.reServerName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("表中没有主键时，需要指定字段作为更改条件")]),e._v(" "),t("el-form-item",{attrs:{label:"主键：",prop:"reKeyColumn"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择主键"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reKeyColumns,callback:function(r){e.$set(e.readerForm,"reKeyColumns",r)},expression:"readerForm.reKeyColumns"}},e._l(e.rColumnList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e._v(" "),e.reSqlServerModule?[t("span",{staticClass:"colExplain"},[e._v("需要和目标端的数据库名称一致")]),e._v(" "),t("el-form-item",{attrs:{label:"server.name：",prop:"reServerName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerName,callback:function(r){e.$set(e.readerForm,"reServerName",r)},expression:"readerForm.reServerName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("表中没有主键时，需要指定字段作为更改条件")]),e._v(" "),t("el-form-item",{attrs:{label:"主键：",prop:"reKeyColumn"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择主键"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reKeyColumns,callback:function(r){e.$set(e.readerForm,"reKeyColumns",r)},expression:"readerForm.reKeyColumns"}},e._l(e.rColumnList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e._v(" "),e.reHaloModule?[t("span",{staticClass:"colExplain"},[e._v("需要和目标端的数据库名称一致")]),e._v(" "),t("el-form-item",{attrs:{label:"server.name：",prop:"reServerName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerName,callback:function(r){e.$set(e.readerForm,"reServerName",r)},expression:"readerForm.reServerName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("表中没有主键时，需要指定字段作为更改条件")]),e._v(" "),t("el-form-item",{attrs:{label:"主键：",prop:"reKeyColumn"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择主键"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reKeyColumns,callback:function(r){e.$set(e.readerForm,"reKeyColumns",r)},expression:"readerForm.reKeyColumns"}},e._l(e.rColumnList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),e._v(" "),e.reDb2Module?[t("span",{staticClass:"colExplain"},[e._v("需要和目标端的数据库名称一致")]),e._v(" "),t("el-form-item",{attrs:{label:"server.name：",prop:"reServerName"}},[t("el-input",{staticStyle:{width:"350px"},on:{input:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reServerName,callback:function(r){e.$set(e.readerForm,"reServerName",r)},expression:"readerForm.reServerName"}})],1),e._v(" "),t("span",{staticClass:"colExplain"},[e._v("表中没有主键时，需要指定字段作为更改条件")]),e._v(" "),t("el-form-item",{attrs:{label:"主键：",prop:"reKeyColumn"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{multiple:"",placeholder:"请选择主键"},on:{change:function(r){return e.createSyncJson()}},model:{value:e.readerForm.reKeyColumns,callback:function(r){e.$set(e.readerForm,"reKeyColumns",r)},expression:"readerForm.reKeyColumns"}},e._l(e.rColumnList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e()],2)],1),e._v(" "),t("json-editor",{ref:"jsonEditor",model:{value:e.syncJson_1,callback:function(r){e.syncJson_1=r},expression:"syncJson_1"}}),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.saveSyncJson("readerForm","reader")}}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"success"},on:{click:function(r){return e.getSyncJsonStatus("reader")}}},[e._v("状态")])],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("div",{staticStyle:{margin:"50px 0"}}),e._v(" "),t("el-form",{ref:"writerForm",attrs:{rules:e.rules,model:e.readerForm,"label-position":"right","label-width":"120px"}},[t("el-divider",{attrs:{"content-position":"left"}},[t("h3",[e._v("数据库目标端")])]),e._v(" "),t("div",{staticStyle:{margin:"50px 0"}}),e._v(" "),t("el-form-item",{staticClass:"redItem",attrs:{label:"数据库目标端：",prop:"datasourceId_2"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{filterable:""},on:{change:e.rDsChange2},model:{value:e.readerForm.datasourceId_2,callback:function(r){e.$set(e.readerForm,"datasourceId_2",r)},expression:"readerForm.datasourceId_2"}},e._l(e.rDsList_2,(function(e){return t("el-option",{key:e.id,attrs:{label:e.datasourceName,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.needSchema_2,expression:"needSchema_2"}],attrs:{label:"Schema：",prop:"tableSchema_2"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{"allow-create":"","default-first-option":"",filterable:""},on:{change:e.schemaChange2},model:{value:e.readerForm.tableSchema_2,callback:function(r){e.$set(e.readerForm,"tableSchema_2",r)},expression:"readerForm.tableSchema_2"}},e._l(e.schemaList_2,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"数据库表名：",prop:"tableName_2"}},[t("el-select",{staticStyle:{width:"350px"},attrs:{"allow-create":"","default-first-option":"",filterable:""},on:{change:e.rTbChange2},model:{value:e.readerForm.tableName_2,callback:function(r){e.$set(e.readerForm,"tableName_2",r)},expression:"readerForm.tableName_2"}},e._l(e.rTbList_2,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),t("el-collapse",{attrs:{accordion:""}},[t("el-collapse-item",[t("template",{slot:"title"},[t("span",{staticStyle:{"font-size":"14px","font-weight":"bold"}},[e._v("点击展开/折叠数据源特有配置参数")])])],2)],1),e._v(" "),t("json-editor",{ref:"jsonEditor2",model:{value:e.syncJson_2,callback:function(r){e.syncJson_2=r},expression:"syncJson_2"}}),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.saveSyncJson("writerForm","writer")}}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"success"},on:{click:function(r){return e.getSyncJsonStatus("writer")}}},[e._v("状态")])],1)],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{visible:e.conStatusVisible},on:{"update:visible":function(r){e.conStatusVisible=r}}},[t("el-descriptions",{attrs:{title:"状态信息",column:2,border:!0}},[t("el-descriptions-item",{attrs:{label:"连接器名称","label-class-name":"my-label","content-class-name":"my-content",span:"2"}},[e._v("\n        "+e._s(e.conStatusForm.name)+"\n      ")]),e._v(" "),t("el-descriptions-item",{attrs:{label:"连接器状态","label-class-name":"my-label"}},[t("el-tag",{attrs:{size:"medium",type:e.connectorTextColor}},[e._v(e._s(e.conStatusForm.connectorState))])],1),e._v(" "),t("el-descriptions-item",{attrs:{label:"任务状态","label-class-name":"my-label"}},[t("el-tag",{attrs:{size:"medium",type:e.tasksTextColor}},[e._v(e._s(e.conStatusForm.tasksState))])],1),e._v(" "),t("el-descriptions-item",{attrs:{label:"详细JSON","label-class-name":"my-label",span:"2"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.conStatusForm.taskJson,expression:"conStatusForm.taskJson"}],staticClass:"jsonTextarea",attrs:{readonly:""},domProps:{value:e.conStatusForm.taskJson},on:{input:function(r){r.target.composing||e.$set(e.conStatusForm,"taskJson",r.target.value)}}})]),e._v(" "),t("el-descriptions-item",{attrs:{label:"接口地址","label-class-name":"my-label",span:"2"}},[t("el-link",{staticStyle:{"padding-bottom":"1px","border-bottom":"1.5px solid #1890ff"},attrs:{href:e.conStatusForm.apiAddress,target:"_blank",type:"primary",underline:!1}},[e._v(e._s(e.conStatusForm.apiAddress))])],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.conStatusVisible=!1}}},[e._v("取 消")])],1)],1)],1)},o=[],s=(t("28a5"),t("7f7f"),t("6b54"),t("7514"),t("f352")),n=t("1270"),l=t("7e39"),i=t("fa7e"),c=t("a53d"),d={name:"SyncJsonBuild",components:{JsonEditor:i["a"]},data:function(){return{jdbcDsQuery:{current:1,size:200,ascs:"datasource_name"},rDsList:[],rDsList_2:[],rTbList:[],rTbList_2:[],schemaList:[],schemaList_2:[],rColumnList:[],loading:!1,active:1,customFields:"",customType:"",customValue:"",dataSource:"",dataSource_2:"",needSchema:!0,needSchema_2:!0,reMysqlModule:!1,reOracleModule:!1,rePostgreSqlModule:!1,reSqlServerModule:!1,reHaloModule:!1,jobProjectList:"",projectIds:"",readerForm:{datasourceId:void 0,tableName:"",tableSchema:"",datasourceId_2:void 0,tableName_2:"",tableSchema_2:"",taskName:"",reServerId:"",oracleVersion:"oracle11",rePdbName:"",reServerName:"",reKeyColumns:[],projectId:""},rules:{datasourceId:[{required:!0,message:"this is required",trigger:"change"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],tableSchema:[{required:!0,message:"请选择Schema",trigger:"change"}],datasourceId_2:[{required:!0,message:"this is required",trigger:"change"}],tableName_2:[{required:!0,message:"请选择表名",trigger:"change"}],tableSchema_2:[{required:!0,message:"请选择Schema",trigger:"change"}],projectId:[{required:!0,message:"请选择所属项目",trigger:"change"}]},originText:"",formatedValue:"",syncJson_1:{},syncJson_2:{},taskId:0,conStatusVisible:!1,connectorTextColor:"red",tasksTextColor:"red",conStatusForm:{name:"",connectorState:"",tasksState:"",taskJson:"",apiAddress:""},oracleVersions:[{id:"oracle11",name:"oracle11"},{id:"oracle19",name:"oracle19"}]}},watch:{"readerForm.datasourceId":function(e,r){this.getSchema(),this.reMysqlModule=!1,this.reOracleModule=!1,this.rePostgreSqlModule=!1,this.reSqlServerModule=!1,this.reHaloModule=!1,this.reDb2Module=!1,"mysql"===this.dataSource?this.reMysqlModule=!0:"oracle"===this.dataSource?this.reOracleModule=!0:"postgresql"===this.dataSource?this.rePostgreSqlModule=!0:"sqlserver"===this.dataSource?this.reSqlServerModule=!0:"halo"===this.dataSource?this.reHaloModule=!0:"db2"===this.dataSource&&(this.reDb2Module=!0)},"readerForm.datasourceId_2":function(e,r){this.getSchema2()}},created:function(){this.getJdbcDs(),this.getJobProject()},methods:{getJdbcDs:function(e){var r=this;this.loading=!0,Object(l["e"])(this.jdbcDsQuery).then((function(e){var t=e.records;r.rDsList=t,r.rDsList_2=t,void 0!==r.$route.query.jobId?r.getInfoById(r.$route.query):(r.dataSource=r.rDsList[0].datasource,r.dataSource_2=r.rDsList_2[0].datasource,r.readerForm.datasourceId=r.rDsList[0].id,r.readerForm.datasourceId_2=r.rDsList_2[0].id),r.loading=!1}))},getTables:function(e){var r=this;if("rdbmsReader"===e){var t={};t=this.needSchema?{datasourceId:this.readerForm.datasourceId,tableSchema:this.readerForm.tableSchema}:{datasourceId:this.readerForm.datasourceId},s["e"](t).then((function(e){e&&(r.rTbList=e)}))}},getTables2:function(e){var r=this;if("rdbmsReader"===e){var t={};t=this.needSchema_2?{datasourceId:this.readerForm.datasourceId_2,tableSchema:this.readerForm.tableSchema_2}:{datasourceId:this.readerForm.datasourceId_2},s["e"](t).then((function(e){e&&(r.rTbList_2=e)}))}},getSchema:function(){var e=this,r={datasourceId:this.readerForm.datasourceId};s["d"](r).then((function(r){e.schemaList=r}))},getSchema2:function(){var e=this,r={datasourceId:this.readerForm.datasourceId_2};s["d"](r).then((function(r){e.schemaList_2=r}))},schemaChange:function(e){this.readerForm.tableSchema=e,this.getTables("rdbmsReader"),this.createSyncJson()},schemaChange2:function(e){this.readerForm.tableSchema_2=e,this.getTables2("rdbmsReader"),this.createSyncJson2()},rDsChange:function(e){var r=this;this.readerForm.tableName="",this.readerForm.datasourceId=e,this.rDsList.find((function(t){t.id===e&&(r.dataSource=t.datasource,r.createSyncJson())})),this.$emit("selectDataSource",this.dataSource),this.readerForm.tableSchema="",this.rTbList=[]},rDsChange2:function(e){var r=this;this.readerForm.tableName_2="",this.readerForm.datasourceId_2=e,this.rDsList_2.find((function(t){t.id===e&&(r.dataSource_2=t.datasource,r.createSyncJson2())})),this.$emit("selectDataSource",this.dataSource_2),this.readerForm.tableSchema_2="",this.rTbList_2=[]},rTbChange:function(e){this.readerForm.tableName=e,this.rColumnList=[],this.readerForm.columns=[],this.getColumns("reader"),this.createSyncJson()},rTbChange2:function(e){this.readerForm.tableName_2=e,this.rColumnList=[],this.createSyncJson2()},getData:function(){return this.readerForm},createSyncJson:function(e){var r=this,t={datasourceId:this.readerForm.datasourceId,schema:this.readerForm.tableSchema,tableName:this.readerForm.tableName,reServerName:this.readerForm.reServerName,reServerId:this.readerForm.reServerId,oracleVersion:this.readerForm.oracleVersion,rePdbName:this.readerForm.rePdbName,reKeyColumns:this.readerForm.reKeyColumns.toString(),createType:"reader"};n["c"](t).then((function(e){r.syncJson_1=e.content}))},createSyncJson2:function(e){var r=this,t={datasourceId:this.readerForm.datasourceId_2,schema:this.readerForm.tableSchema_2,tableName:this.readerForm.tableName_2,readerDatasource:this.dataSource,reKeyColumns:"",createType:"writer"};n["c"](t).then((function(e){r.syncJson_2=e.content}))},saveSyncJson:function(e,r){var t=this,a=!1,o=!1;if(this.$refs["taskForm"].validate((function(e){e&&(a=!0)})),this.$refs[e].validate((function(e){e&&(o=!0)})),a&&o){var s={saveTypeName:r,taskId:this.taskId,taskName:this.readerForm.taskName,readerJson:this.syncJson_1,readerDatasourceId:this.readerForm.datasourceId,readerDatasource:this.dataSource,readerTableSchema:this.readerForm.tableSchema,readerTableName:this.readerForm.tableName,readerMysqlServerName:this.readerForm.mysqlServerName,readerMysqlServerId:this.readerForm.mysqlServerId,reServerName:this.readerForm.reServerName,reServerId:this.readerForm.reServerId,reKeyColumns:this.readerForm.reKeyColumns.toString(),oracleVersion:this.readerForm.oracleVersion,rePdbName:this.readerForm.rePdbName,writerJson:this.syncJson_2,writerDatasourceId:this.readerForm.datasourceId_2,writerDatasource:this.dataSource_2,writerTableSchema:this.readerForm.tableSchema_2,writerTableName:this.readerForm.tableName_2,projectId:this.readerForm.projectId};if("reader"===r){if(!1===this.isValidJSON(s.readerJson))return void this.$message({message:"未选择源端数据源信息或JSON格式错误",type:"error"});!1===this.isValidJSON(s.writerJson)&&(s.writerJson="{}")}else{if(!1===this.isValidJSON(s.writerJson))return void this.$message({message:"未选择目标端数据源信息或JSON格式错误",type:"error"});!1===this.isValidJSON(s.readerJson)&&(s.readerJson="{}")}n["i"](s).then((function(e){var r=e.content;t.taskId=r.taskId,t.$notify({title:"Success",message:"保存成功",type:"success",duration:2e3})}))}},getSyncJsonStatus:function(e){var r=this,t="";if("reader"===e){var a=JSON.parse(this.syncJson_1);t=a.name}else{var o=JSON.parse(this.syncJson_2);t=o.name}this.conStatusVisible=!0,n["d"](t).then((function(e){var a=e.content,o=JSON.stringify(a,null,2);if(r.conStatusForm.taskJson="null"===o?"没有找到连接器的状态":o,null===a)r.conStatusForm.name=t,r.conStatusForm.connectorState="未找到连接器状态信息",r.connectorTextColor="danger",r.conStatusForm.tasksState="未找到任务状态信息",r.tasksTextColor="danger";else{r.conStatusForm.name=t;var s=a.connector.state,n=a.tasks[0].state;"RUNNING"===s?(s="连接正常",r.connectorTextColor=""):(s="连接异常",r.connectorTextColor="danger"),"RUNNING"===n?(n="运行正常",r.tasksTextColor=""):(n="运行异常",r.tasksTextColor="danger"),r.conStatusForm.connectorState=s,r.conStatusForm.tasksState=n}})),n["g"](t).then((function(e){var t=e.content;r.conStatusForm.apiAddress=t.api}))},getInfoById:function(e){var r=this;this.taskId=e.jobId,n["e"](e.jobId).then((function(e){var t=e.content;r.readerForm.taskName=t.syncName,r.syncJson_1=JSON.parse(t.readerJson,null,2),r.syncJson_2=JSON.parse(t.writerJson,null,2);var a=JSON.parse(t.syncJson);r.readerForm.datasourceId=a.readerDatasourceId,r.readerForm.tableSchema=a.readerTableSchema,r.readerForm.tableName=a.readerTableName,r.readerForm.datasourceId_2=a.writerDatasourceId,r.readerForm.tableSchema_2=a.writerTableSchema,r.readerForm.tableName_2=a.writerTableName,r.dataSource=a.readerDatasource,r.dataSource_2=a.writerDatasource,r.readerForm.reServerId=a.reServerId,r.readerForm.reServerName=a.reServerName,r.readerForm.projectId=t.projectId;var o=a.reKeyColumns.split(",");""===o[0]?r.readerForm.reKeyColumns=[]:r.readerForm.reKeyColumns=a.reKeyColumns.split(","),r.readerForm.oracleVersion=a.oracleVersion,r.readerForm.rePdbName=a.rePdbName,r.getTables("rdbmsReader"),r.getColumns("reader")}))},isValidJSON:function(e){try{return JSON.parse(e),!0}catch(r){return!1}},getColumns:function(e){"reader"===e&&this.getTableColumns()},getTableColumns:function(){var e=this,r={datasourceId:this.readerForm.datasourceId,tableSchema:this.readerForm.tableSchema,tableName:this.readerForm.tableName};s["b"](r).then((function(r){var t=r;for(var a in r){var o={label:t[a],value:t[a]};e.rColumnList.push(o)}}))},getJobProject:function(){var e=this;c["c"]().then((function(r){e.jobProjectList=r}))}}},u=d,m=(t("0d69"),t("2877")),p=Object(m["a"])(u,a,o,!1,null,"72b3b3e0",null);r["default"]=p.exports},7514:function(e,r,t){"use strict";var a=t("5ca1"),o=t("0a49")(5),s="find",n=!0;s in[]&&Array(1)[s]((function(){n=!1})),a(a.P+a.F*n,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),t("9c6c")(s)},"789c":function(e,r,t){},"7e39":function(e,r,t){"use strict";t.d(r,"e",(function(){return o})),t.d(r,"c",(function(){return s})),t.d(r,"g",(function(){return n})),t.d(r,"a",(function(){return l})),t.d(r,"b",(function(){return i})),t.d(r,"f",(function(){return c})),t.d(r,"d",(function(){return d}));var a=t("b775");function o(e){return Object(a["a"])({url:"/api/jobJdbcDatasource",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/api/jobJdbcDatasource/"+e,method:"get"})}function n(e){return Object(a["a"])({url:"/api/jobJdbcDatasource",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/api/jobJdbcDatasource",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/jobJdbcDatasource",method:"delete",params:e})}function c(e){return Object(a["a"])({url:"/api/jobJdbcDatasource/test",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/api/jobJdbcDatasource/all",method:"get",params:e})}},"8e34":function(e,r,t){"use strict";t("9c06")},"9c06":function(e,r,t){},a53d:function(e,r,t){"use strict";t.d(r,"d",(function(){return o})),t.d(r,"e",(function(){return s})),t.d(r,"a",(function(){return n})),t.d(r,"b",(function(){return l})),t.d(r,"c",(function(){return i}));var a=t("b775");function o(e){return Object(a["a"])({url:"/api/jobProject",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/api/jobProject",method:"put",data:e})}function n(e){return Object(a["a"])({url:"/api/jobProject",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/api/jobProject",method:"delete",params:e})}function i(e){return Object(a["a"])({url:"api/jobProject/list",method:"get",params:e})}},f352:function(e,r,t){"use strict";t.d(r,"e",(function(){return o})),t.d(r,"d",(function(){return s})),t.d(r,"b",(function(){return n})),t.d(r,"c",(function(){return l})),t.d(r,"a",(function(){return i}));var a=t("b775");function o(e){return Object(a["a"])({url:"/api/metadata/getTables",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/api/metadata/getDBSchema",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/api/metadata/getColumns",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/api/metadata/getColumnsByQuerySql",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/api/metadata/createTable",method:"post",params:e})}},fa7e:function(e,r,t){"use strict";var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"json-editor"},[t("textarea",{ref:"textarea"})])},o=[],s=t("56b3"),n=t.n(s);t("0dd0"),t("a7be"),t("acdf"),t("f9d4"),t("8822"),t("d2de");t("ae67");var l={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(e){var r=this.jsonEditor.getValue();e!==r&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var e=this;this.jsonEditor=n.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",(function(r){e.$emit("changed",r.getValue()),e.$emit("input",r.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()}}},i=l,c=(t("8e34"),t("2877")),d=Object(c["a"])(i,a,o,!1,null,"7b489788",null);r["a"]=d.exports}}]);